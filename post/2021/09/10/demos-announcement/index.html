<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Visualising a Museum Knowledge Graph with Knowledge Graph Embeddings and UMAP | Heritage Connector Blog</title>
<meta name="generator" content="Jekyll v3.9.4" />
<meta property="og:title" content="Visualising a Museum Knowledge Graph with Knowledge Graph Embeddings and UMAP" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Kalyan Dutia" />
<meta property="og:description" content="Kalyan Dutia" />
<link rel="canonical" href="https://thesciencemuseum.github.io/heritageconnector/post/2021/09/10/demos-announcement/" />
<meta property="og:url" content="https://thesciencemuseum.github.io/heritageconnector/post/2021/09/10/demos-announcement/" />
<meta property="og:site_name" content="Heritage Connector Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-10T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Visualising a Museum Knowledge Graph with Knowledge Graph Embeddings and UMAP" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-09-10T00:00:00+00:00","datePublished":"2021-09-10T00:00:00+00:00","description":"Kalyan Dutia","headline":"Visualising a Museum Knowledge Graph with Knowledge Graph Embeddings and UMAP","mainEntityOfPage":{"@type":"WebPage","@id":"https://thesciencemuseum.github.io/heritageconnector/post/2021/09/10/demos-announcement/"},"url":"https://thesciencemuseum.github.io/heritageconnector/post/2021/09/10/demos-announcement/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/heritageconnector/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://thesciencemuseum.github.io/heritageconnector/feed.xml" title="Heritage Connector Blog" />

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TP2L24V');</script>
<!-- End Google Tag Manager -->
</head>
<body><!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TP2L24V"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/heritageconnector/">Heritage Connector Blog</a></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Visualising a Museum Knowledge Graph with Knowledge Graph Embeddings and UMAP</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-09-10T00:00:00+00:00" itemprop="datePublished">
        10 September 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><strong>Kalyan Dutia</strong></p>

<p><em>This blog post introduces an interactive visualisation of a knowledge graph created from the <a href="https://collection.sciencemuseumgroup.org.uk/">Science Museum Group’s collection</a>, <a href="https://blog.sciencemuseum.org.uk/">blog</a> and <a href="http://journal.sciencemuseum.ac.uk/">journal</a>. If you’re not interested in the technical work behind the visualisation, you can <a href="https://thesciencemuseum.github.io/heritage-connector-demos/3_visualisation/index.html">play with it here</a>.</em></p>

<hr />

<p><strong>Contents:</strong></p>

<ul>
  <li><a href="#developing-the-visualisation">Developing the Visualisation</a></li>
  <li><a href="#first-observations-on-the-demos">First Observations on the Demos</a></li>
  <li><a href="#next-steps">Next Steps</a></li>
</ul>

<hr />

<p><img src="../../../../../post_files/charts-for-demos-announcement/visualisation_demo.gif" alt="Animated screenshot of Heritage Connector visualisation" />
<span class="caption">Interactive visualisation of knowledge graph created from SMG’s collection, blog and journal (see top of page for link).</span></p>

<p>In the Heritage Connector project, we’re <a href="https://onlinelibrary.wiley.com/doi/10.1002/ail2.23">building a knowledge graph from museum collections using machine learning</a>. Some of the potential benefits we envisioned this knowledge graph could bring were:</p>

<ul>
  <li>enabling macro-views of the whole collection;</li>
  <li>new and more flexible groupings of items within and across collections;</li>
  <li>richer onward journeys from one collection record, blog post or journal article to the next;</li>
  <li>new entry points from which to begin exploring the collection; and</li>
  <li>new forms of interface, to provide an alternative to keyword search discovery.</li>
</ul>

<p>Some <a href="https://thesciencemuseum.github.io/heritageconnector/post/2021/03/11/imagining-interfaces/">research</a> into existing interfaces highlighted <a href="https://riksantikvarieambetet.github.io/Generous-Interface-Fashion/">existing</a> <a href="http://seeingthruthefogg.herokuapp.com/index.html#time">imaginative</a> <a href="https://web.archive.org/web/20171205085623/http://twoway.st/">interfaces</a> for cultural heritage, and we also thought about the challenges in presenting such information in a cultural heritage context.</p>

<p>After this research and some discussion within the team, we decided that we’d begin building three different interfaces. Having first versions of each interface would then give us blueprints to develop on, challenge, and share with cultural heritage practitioners. The interfaces we decided on were:</p>

<ol>
  <li><strong>A metadata explorer</strong> - where users can view the new connections that have been created from an SMG collection record, blog or journal page to other pages or external sources. We implemented this as a <a href="https://github.com/TheScienceMuseum/heritage-connector-demos/tree/main/2_bookmarklet">browser bookmarklet</a>, and hope that some of its functionality will be built into the SMG collection website.</li>
  <li><strong>A keyword search</strong> - which enables users to perform a text search across the new metadata, for example the new Wikidata entities.</li>
  <li><strong>An interactive visualisation of the whole collection</strong> - what this blog post is about!</li>
</ol>

<p><img src="../../../../../post_files/charts-for-demos-announcement/bookmarklet_demo.gif" alt="Animated screenshot of 'metadata explorer' bookmarklet" />
<span class="caption">Demo of ‘metadata explorer’ bookmarklet.</span></p>

<h2 id="developing-the-visualisation">Developing the Visualisation</h2>

<p>Visualisations like this one tend to follow the same recipe: get some embeddings, which are vector representations of each thing; reduce the dimension of these embeddings to 2D or 3D; then plot these reduced embeddings.</p>

<p><img src="../../../../../post_files/charts-for-demos-announcement/entities_to_embeddings_to_2D_projections.jpg" alt="Animated screenshot of 'metadata explorer' bookmarklet" />
<span class="caption">Transformation of entities in a knowledge graph to knowledge graph embeddings, to plottable 2D projections of these embeddings.</span></p>

<p>Following this framework, our first step was to <strong>turn entities in the knowledge graph into vectors</strong>. The family of approaches to do this is called <a href="https://kge-tutorial-ecai2020.github.io/">knowledge graph embeddings</a>, which are produced by specially-designed neural networks (if we just had text data, we could use a language model to produce word or sentence embeddings). As we knew we wanted to visualise these embeddings, we experimented with the translational family of models, i.e. those where the triple <code class="language-plaintext highlighter-rouge">s-&gt;p-&gt;o</code> corresponds to a translation in vector space between <code class="language-plaintext highlighter-rouge">s</code> and <code class="language-plaintext highlighter-rouge">o</code>.</p>

<p>Fortunately for us, a range of Python libraries exist to produce knowledge graph embeddings from a list of triples. After some experimentation with <a href="http://pykeen.readthedocs.io/">PyKEEN</a>, we ended up using <a href="https://github.com/awslabs/dgl-ke">DGL-KE</a> as it was optimised for large knowledge graphs such as ours. Running some hyperparameter tuning led us to using a <a href="https://arxiv.org/abs/1902.10197v1">RotatE</a> model which produced an 800-dimension vector for each of the 645,565 entities in the knowledge graph, and a 400-dimension vector for each of the 53 relations.</p>

<p>To validate that this model seemed effective for our purposes (recommendation and visualisation), we quickly looked at some nearest neighbour visualisations and a dimensionality-reduced plot of the embeddings (<a href="https://github.com/TheScienceMuseum/heritage-connector-vectors/blob/main/notebooks/visualise%20and%20analyse%20embeddings.ipynb">Jupyter notebook</a>).</p>

<p>The next step was to condense the 800-dimensioned entity vectors into 2 dimensions, so we could plot them. Dimensionality reduction models like the one we used have several parameters which you can tweak to change the final layout of the plot, such as how far apart clusters are. Using a <a href="https://docs.rapids.ai/api/cuml/nightly/api.html#umap">GPU-accelerated implementation of UMAP</a>, a popular dimensionality reduction model, we ran the model multiple times with different sets of parameters, then chose the version of the model which produced the best looking plot with respect to it being a) condensed enough to fit on a screen, but not too condensed, and b) clustering together existing SMG collection categories.</p>

<p><img src="../../../../../post_files/charts-for-demos-announcement/changing_UMAP_parameters.png" alt="Animated screenshot of 'metadata explorer' bookmarklet" />
<span class="caption">A few examples of how changing the UMAP parameters affects the layout of the visualisation. <a href="https://pair-code.github.io/understanding-umap/">This article</a> is a great interactive introduction to the different parameters.</span></p>

<p>Finally, we needed to find a way to plot ~650,000 points in an interactive app on the website. Fortunately, many people had done this before us! We chose to use <a href="https://blog.scottlogic.com/2020/05/01/rendering-one-million-points-with-d3.html">Colin Eberhardt’s Hathi Trust library visualisation</a> as a starting point, and getting this up and running was as easy as creating a JSON file with the embeddings in the required format.</p>

<p>In order to make the interface more useful for browsing a museum collection, we decided to add an attribute pane, which would show more information about a record if its dot was clicked on. Soon we extended this to allow showing multiple attribute panes at a time, enabling people to start to collect and compare different museum records, blog posts, Wikidata pages and journal articles. We also added a legend to make the plot clearer.</p>

<p><img class="smaller-image" src="../../../../../post_files/charts-for-demos-announcement/visualisation_info_panel.png" alt="Animated screenshot of 'metadata explorer' bookmarklet." width="400" /></p>

<p><span class="caption">An example of collecting and comparing multiple records in the knowledge graph visualisation.</span></p>

<h2 id="first-observations-on-the-demos">First Observations on the Demos</h2>

<p>As the work we’ve written about here has presented new, experimental ways of navigating the collection, it’s important to us to get feedback on them from a range of audiences. Naturally, I started with the Heritage Connector team (we are also consulting SMG’s curatorial team, and exposing these interfaces to developers for a hackathon).</p>

<p>Here are some of their observations:</p>

<p><strong>On the knowledge graph visualisation:</strong></p>

<ul>
  <li>Existing SMG collection categories mostly cluster together in ways that make sense: for example, the clusters for <em>Photographic Technology</em>, <em>Cinematography</em> and <em>Photographs</em> are positioned next to each other.</li>
  <li>Related objects and archival documents tend to sit alongside each other.</li>
  <li>Wikidata pages are clustered with similar Wikidata pages, rather than the SMG records which refer to them. This leads to quite neat clusters of ‘bands &amp; albums’ and ‘events’.</li>
  <li>People, companies and organisations cluster amongst Wikidata, whereas few objects appear in the Wikidata cluster.</li>
  <li>There are some great examples of clusters of blog posts, documents, objects and companies, but this kinds of feature isn’t consistent throughout the visualisation. This implies that mechanisms other than visualisation or KG embeddings might be useful to help users navigate the collection.</li>
  <li>The visualisation is a hard interface to use if you’re looking for something specific, that you know exists in the knowledge graph. It could be improved for this use case by adding text search.</li>
</ul>

<p><strong>On the new connections displayed through these interfaces:</strong></p>

<ul>
  <li>Blog posts and journal articles are rich with links to Wikidata, objects, people, orgs, etc generated through NER and entity linking.</li>
  <li>Even where there is thin data, there are some encouragingly accurate links, for example <a href="https://collection.sciencemuseumgroup.org.uk/objects/co8035134/design-for-a-square-de-landau-carriage-carriage-design">here to Barker coach makers</a>, where a correct link is made to the <a href="https://www.wikidata.org/wiki/Q4860939">coachbuilder’s Wikidata page</a>, which only has a single word in its title.</li>
</ul>

<p><strong>Other observations:</strong></p>

<ul>
  <li>Related objects are very strong – as seen in the bookmarklet.</li>
  <li>Where there are false positives these are usually obvious to the user, and so limited in their negative impact so long as links are framed correctly.</li>
</ul>

<h2 id="next-steps">Next Steps</h2>

<p>In the closing months of the project, we’re primarily looking to extend our existing work to find out how these techniques work across museum collections, by processing the V&amp;A’s digital collection. New versions of these demos will soon be available, showing the potential (or not!) of these techniques for cross-collection linking.</p>

<p>We’re also gathering feedback from SMG curators, and running a hackathon with <a href="https://www.cogapp.com/">digital media agency Cogapp</a>. Time permitting, we’ll also look into metadata search as a third demo.</p>

<p>Look out for our final set of blog posts and our final event in the coming months!</p>

  </div><a class="u-url" href="/heritageconnector/post/2021/09/10/demos-announcement/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
<!--  
   <data class="u-url" href="/heritageconnector/"></data>
-->

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        
<!--
        <ul class="contact-list">
          
        </ul>

-->
        <p style="font-weight: bold; text-transform: uppercase;">Heritage Connector: Transforming text into data to extract meaning and make connections
</p> 
      <ul>
                    <li>
                        <a href="https://www.sciencemuseumgroup.org.uk/projects/heritage-connector">Project information</a>
                    </li>
                    <li>
                        <a href="https://thesciencemuseum.github.io/heritageconnector/">Blog homepage</a>
                    </li>
                    <li>
                        <a href="https://www.zotero.org/groups/2439363/heritage_connector">Zotero library</a>
                    </li>
                    <li>
                        <a href="https://www.youtube.com/channel/UCzO6jroIvj-JbFuiQ9BpZdQ">YouTube channel</a>
                    </li>
        
                    <li>
                        <a href="https://github.com/TheScienceMuseum/heritage-connector/">GitHub repository</a>
                    </li>
                 
                </ul> 
        
<p class="feed-subscribe">
          <a href="/heritageconnector/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/heritageconnector/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Blog RSS feed</span>
          </a>
        </p>  
        
<p class="feed-subscribe">
          <a href="https://www.youtube.com/feeds/videos.xml?channel_id=UCzO6jroIvj-JbFuiQ9BpZdQ">
            <svg class="svg-icon orange">
              <use xlink:href="/heritageconnector/assets/minima-social-icons.svg#rss"></use>
            </svg><span>YouTube RSS feed</span>
          </a>
        </p>  
        
        
        <p>All content <a href="https://creativecommons.org/licenses/by/4.0/legalcode">Creative Commons Attribution (CC BY)</a> license unless otherwise specified.</p>
        

      </div>
      
      <div class="footer-col">
        <p>Heritage Connector is a partnership between the <a href="https://www.sciencemuseumgroup.org.uk/">Science Museum Group</a>, <a href="https://www.sas.ac.uk">School of Advanced Study, University of London</a> and the <a href="https://www.vam.ac.uk">V&amp;A</a>.</p>
        <p>Heritage Connector is funded by the Arts and Humanities Research Council's <a href="https://www.nationalcollection.org.uk">Towards a National Collection: Opening UK Heritage to the World</a> programme (<a href="https://www.ukri.org/what-we-do/our-main-funds-and-areas-of-support/browse-our-areas-of-investment-and-support/towards-a-national-collection-opening-uk-heritage-to-the-world/">AHRC webpage</a>).</p>
        
         <ul>
              <li><a href="https://www.sciencemuseumgroup.org.uk/privacy-policy/">Privacy and cookies</a></li>
              <li><a href="https://www.sciencemuseumgroup.org.uk/terms-and-conditions/">Terms and conditions</a></li>
              <li><a href="https://www.sciencemuseumgroup.org.uk/web-accessibility/">Web accessibility</a></li>
        </ul> 
        
      
      
      
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

    
  </div>

</footer>
</body>

</html>
